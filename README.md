# Задание 1 #
файл /orders.php

# Задание 2 #
## 2.1 ##
Исходя из того, как сделано тут, можно пойти таким же путём: добавить колонки `ticket_preferential_price`, `ticket_preferential_quantity`, `ticket_group_price`, `ticket_group_quantity`. Но можно куда лучше

id  | event_id  | event_date          | ticket_adult_price  | ticket_adult_quantity  | ticket_kid_price  | ticket_kid_quantity  | barcode   | user_id  | equal_price  | created | ticket_preferential_price | ticket_preferential_quantity | ticket_group_price | ticket_group_quantity
--- | --------- | ------------------- | ------------------- | ---------------------- | ----------------- | -------------------- | --------  | -------- | ------------ | ------------------- | ------------------- | ------------------- | ------------------- | -------------------
1   | 003       | 2021-08-21 13:00:00 | 700                 | 1                      | 450               | 0                    | 11111111  | 00451    | 700          | 2021-01-11 13:22:09 | 200 | 1 | 0 | 0

## 2.2 ##
Есть наиболее оптимальный вариант, но требующий больших изменений:
	**1 билет = 1 строка**. 
	Нужно убрать все колонки `ticket_*_price`, `ticket_*_quantity`,`equal_price`, вместо них добавить `ticket_price` и добавить столбец `type`, который будет отвечать за тип билета.
	Столбец `type` будет принимать следующие значения: 
		- `0` обычный билет
		- `1` детский билет
		- `2` льготный билет
		- `3` групповой билет
	
Финальный вид таблицы:

id  | event_id  | event_date          | ticket_price  | type | barcode   | user_id  | created
--- | --------- | ------------------- | ------------------- | ---------------------- | ----------------- | -------------------- | --------  | -------- | ------------ | ------------------- | ------------------- | -------------------
1   | 003       | 2021-08-21 13:00:00 | 700                 | 1                | 11111111  | 00451         | 2021-01-11 13:22:09

Итого мы получаем простой, масшабируемый вариант, который более чем отвечает заданным требованиям: для каждого билета свой баркод и можно делать неограниченное количество типов билетов, добавлять(удалять) тип билетов без изменений в БД.

Есть вариант не требующий больших изменений: Можно поменять тип колонки `barcode` на JSON и соответсвенно, хранить в нём сколько нужно баркодов.

# Задание 3 #

## Метод create ##

	create(int event_id, string event_date, int ticket_adult_price, int ticket_adult_quantity, int ticket_kid_price, int ticket_kid_quantity)

Создаёт новый заказ.

Принимаемые параметры: 

* `event_id` - id мероприятия
* `event_date` - время в формате "YYYY-MM-DD hh:mm:ss", строка
* `ticket_adult_price` - цена взрослых билетов
* `ticket_adult_quantity` - кол-во взрослых билетов
* `ticket_kid_price` - цена детских билетов
* `ticket_kid_quantity` - кол-во детских билетов

В случае успеха возвращает `barcode` - уникальный набор чисел.

В случае неудачи бросает исключение

